<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Atleta PRO 2026</title>
    
    <!-- PWA Config -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Tailwind CSS (Carga crítica) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { 
            background-color: #050505; 
            color: white; 
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }
        .card {
            background: #111827;
            border: 1px solid #1f2937;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div id="app">
        <!-- Contenido de respaldo por si falla el JS -->
        <div class="flex items-center justify-center h-screen">
            <p class="text-purple-500 font-bold animate-pulse">CARGANDO ENTRENAMIENTO...</p>
        </div>
    </div>

    <script>
        // Datos de entrenamiento
        const pesosBase = { squat: 275, clean: 190, deadlift: 295, press: 135, snatch: 150, frontSquat: 252 };

        function calcularPeso(base) {
            const hoy = new Date();
            const inicio = new Date(2026, 0, 5);
            const dias = Math.floor((hoy - inicio) / (1000 * 60 * 60 * 24));
            if (dias < 0) return base;
            const semana = Math.floor(dias / 7);
            const semanaCiclo = (semana % 4) + 1;
            if (semanaCiclo === 4) return Math.round(base * 0.7);
            return base + ((semanaCiclo - 1) * 10);
        }

        const rutinas = {
            1: { titulo: "Lunes: Fuerza Base", ej: "Sentadilla Trasera", peso: "squat", rep: "5x5" },
            2: { titulo: "Martes: Halterofilia", ej: "C&J Complex", peso: "clean", rep: "5x1" },
            3: { titulo: "Miércoles: Tracción", ej: "Peso Muerto", peso: "deadlift", rep: "3x5" },
            4: { titulo: "Jueves: Habilidad", ej: "HSPU Estrictos", peso: null, rep: "5xMáx" },
            5: { titulo: "Viernes: Snatch", ej: "Snatch Complex", peso: "snatch", rep: "5x1" },
            6: { titulo: "Sábado: Volumen", ej: "Remo 2000m", peso: null, rep: "Tempo" }
        };

        function iniciarApp() {
            const contenedor = document.getElementById('app');
            const diaSemana = new Date().getDay();
            const hoy = rutinas[diaSemana] || { titulo: "Descanso Activo", ej: "Caminar / Estirar", peso: null, rep: "-" };

            contenedor.innerHTML = `
                <div class="p-6">
                    <header class="mb-10">
                        <h1 class="text-3xl font-black italic">ATLETA<span class="text-purple-500">PRO</span></h1>
                        <p class="text-xs text-gray-500 font-bold tracking-widest mt-1">ENERO 2026</p>
                    </header>

                    <div class="card">
                        <span class="text-purple-400 text-[10px] font-bold tracking-[0.3em] uppercase">Hoy</span>
                        <h2 class="text-2xl font-black mt-2 mb-6">${hoy.titulo}</h2>
                        
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold text-lg text-white">${hoy.ej}</p>
                                <p class="text-xs text-gray-500 font-bold uppercase">${hoy.rep}</p>
                            </div>
                            <div class="text-right">
                                <span class="text-3xl font-black italic text-white">${hoy.peso ? calcularPeso(pesosBase[hoy.peso]) : '--'}</span>
                                <span class="text-[10px] font-bold text-purple-500 ml-1">LB</span>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-[10px] text-gray-600 text-center mt-12 uppercase font-bold tracking-widest">
                        Abre el menú del navegador para instalar como App
                    </p>
                </div>
            `;
        }

        // Ejecutar al cargar
        window.onload = iniciarApp;

        // Service Worker silencioso
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js').catch(() => {});
        }
    </script>
</body>
</html>
